<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function debounce(cb, wait) {
            let timeout = null
            return function (...args) {
                let context = this

                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    cb.apply(context, args);
                }, wait)
            }
        }

        //防抖(立即执行)
        function debounce_isImmediate(func, wait = 500) {
            let timer = null;
            return function (...args) {
                let context = this

                if (timer) clearTimeout(timer)
                
                let callNow = !timer;
                timer = setTimeout(() => {
                    timer = null;
                }, wait)
                if (callNow) func.apply(context, args)
            }
        }

        function handle() {
            console.log(Math.random());
        }
        window.addEventListener("mousemove", debounce(handle, 1000, true)); // 调用立即执行版本
    </script>

</body>

</html>